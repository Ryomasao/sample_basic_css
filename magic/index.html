<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

<!--フォントだけ適当に-->
<link href="https://fonts.googleapis.com/earlyaccess/nicomoji.css" rel="stylesheet" />

<!--Swiper:スライド-->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.1/css/swiper.min.css">
<!--magic:アニメーション-->
<link rel="stylesheet" type="text/css" href="magic.css">
<link rel="stylesheet" type="text/css" href="mycss/mystyle.css">

<!--
Swiper公式
http://idangero.us/swiper/api/#.WdXuoGi0M2w
-->
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/3.4.1/js/swiper.min.js"></script>

<title>HTML5サンプル</title>
</head>
<body>
    <div class="header">
        ヘッダー
    </div>

    <!--main-->
    <div class="container">

        <div class="swiper-container">
                <!-- Additional required wrapper -->
                <div class="swiper-wrapper">
                    <!-- Slides -->
                    <div class="swiper-slide">
                     <section class="tabs">
                         <input id="tab-1" type="radio" name="radio-set"  checked/>
                         <label for="tab-1" class="tab-label-1" v-on:click="iAm">加盟店A</label>
                         <input id="tab-2" type="radio" name="radio-set"/>
                         <label for="tab-2" class="tab-label-2">加盟店B</label>
                         <input id="tab-3" type="radio" name="radio-set"/>
                         <label for="tab-3" class="tab-label-3">加盟店C</label>
                         <input id="tab-4" type="radio" name="radio-set"/>
                         <label for="tab-4" class="tab-label-4">加盟店D</label>
                     </section>
                    </div>
                    <div class="swiper-slide">
                     <section class="tabs">
                         <input id="tab-5" type="radio" name="radio-set">
                         <label for="tab-5" class="tab-label-5" v-on:click="iAm">加盟店E</label>
                         <input id="tab-6" type="radio" name="radio-set"/>
                         <label for="tab-6" class="tab-label-6">加盟店F</label>
                         <input id="tab-7" type="radio" name="radio-set"/>
                         <label for="tab-7" class="tab-label-7">加盟店G</label>
                         <input id="tab-8" type="radio" name="radio-set"/>
                         <label for="tab-8" class="tab-label-8">加盟店H</label>
                     </section>
                    </div>
                </div>
                
            </div>

        <!--クーポン-->
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <!-- Slides -->
                <div class="swiper-slide"> 
                    <div class="content-wrapper">
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide"> 
                    <div class="content-wrapper">
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="content-wrapper">
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                        <div class="box">
                            <div class="coupon">
                                <p>10pt</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-slide">
                    <div class="content-wrapper">
                        <h1>なにもないよ</h1>
                    </div>
                </div>
            </div>  
        </div>

        
        <!--ページ送りボタンとか消した-->
        <!-- If we need pagination -->
        <!--
        <div class="swiper-pagination"></div>
        -->
        <!-- If we need navigation buttons -->
        <!--
        <div class="swiper-button-prev"></div>
        <div class="swiper-button-next"></div>
        -->

    </div>

    <!--footer-->
    <div class="footer">
    </div>
<script>
        //Swiper
        var mySwiper = new Swiper ('.swiper-container', {
            effect: "slide",
            loop: false,
            pagination: '.swiper-pagination',
            nextButton: '.swiper-button-next',
            prevButton: '.swiper-button-prev',
            onSlideChangeEnd:function(swipe){
                changeTabIndex(swipe.activeIndex);
            }
        })

        function changeTabIndex(index){
           //activeIndexはloopを有効にすると、1->2->3->4で1に戻るかと思いきや5とかになる
           //さらにactiveIndexは1からはじまるが、配列は0からアクセスする。
           //loopを無効にするとそんな面倒なことはおきないみたい。
           let tab = document.querySelectorAll("input[type='radio']");
           tab[index].checked = true;
        }

       document.addEventListener("DOMContentLoaded", function(event) {
           console.log("DOM fully loaded and parsed");
        
            //クーポンクリックでとぶイベントを追加する。
           let element = document.getElementsByClassName("coupon");

           for(var i = 0; i < element.length; i++)
           {
               element[i].addEventListener("click",function(event){
                    this.classList.add('magictime');
                    this.classList.add('magic');
               });
           }

           //タブで切り替える
           let labels = document.querySelectorAll(".tabs label");

           //クロージャを知らなかった
           for (var i = 0, l = labels.length; i < l; i++) (function(n) {
              labels[n].addEventListener('click', function() {
                   mySwiper.slideTo(n);
                   console.log("click:" + n);
              }, false);
            })(i);


    });


</script>
</body>
</html>